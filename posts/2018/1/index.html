<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> ColdFusion cfexecute Example | Barrett Otte</title>
<link rel=canonical href=https://barrettotte.github.io/posts/2018/1/>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=stylesheet href=https://barrettotte.github.io/css/styles.bebfd0fcd5c4beefd5e8db2f541c0a96d3ed6379a3d52507d2293cce9e4ee7a91f7dd86f952d64bdb641436e19695b10c4c2db2da469eee86cf81604e11deb16.css integrity="sha512-vr/Q/NXEvu/V6NsvVBwKltPtY3mj1SUH0ik8zp5O56kffdhvlS1kvbZBQ24ZaVsQxMLbLaRp7uhs+BYE4R3rFg==">
<link rel=stylesheet href=https://barrettotte.github.io/lib/font-awesome/css/all.min.css>
<link rel=stylesheet href=https://barrettotte.github.io/css/custom.css>
<link rel=prefetch href=https://barrettotte.github.io/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=prefetch href=https://barrettotte.github.io/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=prefetch href=https://barrettotte.github.io/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=prefetch href=https://barrettotte.github.io/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=icon href=https://barrettotte.github.io/img/favicon.svg>
</head>
<body class="max-width mx-auto px3 py5 ltr">
<div class="content index py4"><header id=header>
<div id=title>
<h1><a href=https://barrettotte.github.io>Barrett Otte</a></h1>
<div id=subtitle>
<div class=subtitle-item><a href=https://github.com/barrettotte>Software Engineer</a></div>
<div class=subtitle-item>Tinkerer</div>
<div class=subtitle-item><a href=https://anilist.co/user/barrettotte/>Loser</a></div>
</div>
</div>
<div id=nav>
<div class=nav-item>
<a href=/>Home</a>
</div>
<div class=nav-item>
<a href=/projects>Projects</a>
</div>
<div class=nav-item>
<a href=/posts class=active>Posts</a>
</div>
<div class=nav-item>
<a href=/about>About</a>
</div>
<div class=nav-item>
<a href=https://raw.githubusercontent.com/barrettotte/Resume/master/barrettotte-resume.pdf target=_blank rel="noopener noreferrer">Resume</a>
</div>
<div class=nav-item>
<a href=/misc>Misc</a>
</div>
</div>
</header>
<article class=post>
<header>
<h1 class=posttitle>ColdFusion cfexecute Example</h1>
<div class=meta>
<span class=author>
<span>Barrett Otte</span>
</span>
<div class=postdate>
<time datetime="2018-09-01 00:00:00 +0000 UTC">2018-09-01</time>
</div>
<div class=article-read-time>
<i class="far fa-clock"></i>
1 minute read
</div>
</div>
</header>
<div class=content>
<p>Since ColdFusion is very similar to PHP, I wanted to mess around with some of the less-used functions.
<code>cfexecute</code> is a function that will pop a shell and execute a program.</p>
<p>In this example program, I just made a &ldquo;wrapper&rdquo; around <code>ping</code>.</p>
<p><code>execute.cfc</code></p>
<pre tabindex=0><code>component name=&quot;CF Execute Test&quot; hint=&quot;Messing around with cfexecute built in method.&quot;{

    public any function init(){
        variables.system32Path = &quot;C:\Windows\system32\&quot;;
        variables.commands = {
            &quot;ping&quot;: variables.system32Path &amp; &quot;ping.exe&quot;
        };
        return this;
    }

    public struct function getCommandList(){
        return variables.commands;
    }
    public string function getSystem32Path(){
        return variables.system32Path;
    }

    public string function ping(required string target){
        return execute(variables.commands[&quot;ping&quot;], arguments.target, 25);
    }

    private string function execute(required string name, any args=&quot;&quot;, string timeout=0, string outputfile=&quot;&quot;){
        local.result = &quot;&quot;;
        savecontent variable=&quot;result&quot;{
            if(len(outputfile)){
                cfexecute(
                    name=arguments.name,
                    arguments=arguments.args,
                    timeout=arguments.timeout,
                    outputfile=arguments.outputfile
                );
            } else{
                cfexecute(
                    name=arguments.name, 
                    arguments=arguments.args, 
                    timeout=arguments.timeout
                );
            }
        }
        return local.result;
    }
}
</code></pre><p><code>execute.cfm</code></p>
<pre tabindex=0><code>&lt;html&gt;
    &lt;head&gt;
        &lt;style type=&quot;text/css&quot;&gt;
            .headContainer{
                padding: 10px 0px 20px 0px;
            }
            .container {
                padding: 20px 0px 20px 0px;
            }
            .consoleView {
                padding-left: 10px; 
                padding-right: 10px;
                background-color: black; 
                color: #00FF00;
                font-size: 18px;
            }
            .buttonLabel {
                padding-right: 5px;
                font-size: 18px;
            }
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;cfset execObj = createObject('component', 'execute').init()/&gt;
        &lt;cfset commandList = execObj.getCommandList()/&gt;
        &lt;div class=&quot;headContainer&quot;&gt;
            &lt;h2&gt;CF Execute Testing&lt;/h2&gt;
            Messing around with the cfexecute built in method.
        &lt;/div&gt;
        &lt;hr&gt;
        &lt;form method=&quot;get&quot;&gt;
            &lt;cfif structCount(commandList) GT 0&gt;
                &lt;div class=&quot;container&quot;&gt;
                    &lt;h3&gt;Available Command(s):&lt;/h3&gt;
                    &lt;ol&gt;
                        &lt;cfloop collection=&quot;#commandList#&quot; item=&quot;key&quot;&gt;
                            &lt;li&gt;&lt;cfoutput&gt;#commandList[key]#&lt;/cfoutput&gt;&lt;/li&gt;
                        &lt;/cfloop&gt;
                    &lt;/ol&gt;
                &lt;/div&gt;
                &lt;hr&gt;
            &lt;/cfif&gt;
            &lt;div class=&quot;container&quot;&gt;
                &lt;b class=&quot;buttonLabel&quot;&gt;Ping&lt;/b&gt;
                &lt;input type=&quot;text&quot; name=&quot;inputData&quot; size=&quot;10&quot; max=&quot;25&quot; value=&quot;&quot;/&gt;
                &lt;input type=&quot;submit&quot; value=&quot;Go&quot;&gt; 
            &lt;/div&gt;
        &lt;/form&gt;
        &lt;form method=&quot;post&quot;&gt;
            &lt;cfif isDefined(&quot;inputData&quot;) AND inputData NEQ &quot;&quot;&gt;
                &lt;div class=&quot;container consoleView&quot;&gt;
                    &lt;cfoutput&gt;#htmlCodeFormat(execObj.ping(inputData))#&lt;/cfoutput&gt;
                    &lt;cfset inputData=&quot;&quot;/&gt;
                &lt;/div&gt;
            &lt;/cfif&gt;
        &lt;/form&gt;
        &lt;hr&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
</div>
</article>
<footer id=footer>
<div class=footer-left>
&copy; 2023
<a href=/>Barrett Otte</a>
</div>
<div class=footer-right>
<nav>
<ul>
<li>
<a class=icon target=_blank rel=noopener href=mailto:barrettotte@gmail.com>
<i class="fas fa-lg fa-envelope"></i>
</a>
</li>
<li>
<a class=icon target=_blank rel=noopener href=https://github.com/barrettotte>
<i class="fab fa-lg fa-github"></i>
</a>
</li>
<li>
<a class=icon target=_blank rel=noopener href=https://www.linkedin.com/in/barrettotte/>
<i class="fab fa-lg fa-linkedin"></i>
</a>
</li>
<li>
<a class=icon target=_blank rel=noopener href=https://barrettotte.itch.io/>
<i class="fab fa-lg fa-itch-io"></i>
</a>
</li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=https://barrettotte.github.io/lib/font-awesome/css/all.min.css>
<script src=https://barrettotte.github.io/lib/jquery/jquery.min.js></script>
<script src=https://barrettotte.github.io/js/code-copy.js></script>
</html>