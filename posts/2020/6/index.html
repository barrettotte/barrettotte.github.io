<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Projectile Motion and Introduction to Octo | Barrett Otte</title>
<link rel=canonical href=https://barrettotte.github.io/posts/2020/6/>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=stylesheet href=https://barrettotte.github.io/css/styles.c05d68261bf086a9d7713c4f8a6215a3601608e267a816a7ee58f139b3d1aae51222aae2081c8e0c6bd35e1334773b7a16283022f31f92afd93bb37e5e822e66.css integrity="sha512-wF1oJhvwhqnXcTxPimIVo2AWCOJnqBan7ljxObPRquUSIqriCByODGvTXhM0dzt6FigwIvMfkq/ZO7N+XoIuZg==">
<link rel=stylesheet href=https://barrettotte.github.io/lib/font-awesome/css/all.min.css>
<link rel=stylesheet href=https://barrettotte.github.io/css/custom.css>
<link rel=preload href=https://barrettotte.github.io/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=https://barrettotte.github.io/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=https://barrettotte.github.io/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=https://barrettotte.github.io/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=icon href=https://barrettotte.github.io/img/favicon.svg>
</head>
<body class="max-width mx-auto px3 py5 ltr">
<div class="content index py4"><header id=header>
<div id=title>
<h1><a href=https://barrettotte.github.io>Barrett Otte</a></h1>
<div id=subtitle>
<div class=subtitle-item><a href=https://github.com/barrettotte>Software Engineer</a></div>
<div class=subtitle-item>Tinkerer</div>
<div class=subtitle-item><a href=https://anilist.co/user/barrettotte/>Loser</a></div>
</div>
</div>
<div id=nav>
<div class=nav-item>
<a href=/>Home</a>
</div>
<div class=nav-item>
<a href=/projects>Projects</a>
</div>
<div class=nav-item>
<a href=/posts class=active>Posts</a>
</div>
<div class=nav-item>
<a href=/about>About</a>
</div>
<div class=nav-item>
<a href=https://raw.githubusercontent.com/barrettotte/Resume/master/barrettotte-resume.pdf target=_blank rel="noopener noreferrer">Resume</a>
</div>
<div class=nav-item>
<a href=/misc>Misc</a>
</div>
</div>
</header>
<article class=post>
<header>
<h1 class=posttitle>Projectile Motion and Introduction to Octo</h1>
<div class=meta>
<span class=author>
<span>Barrett Otte</span>
</span>
<div class=postdate>
<time datetime="2020-09-07 00:00:00 +0000 UTC">2020-09-07</time>
</div>
<div class=article-read-time>
<i class="far fa-clock"></i>
4 minute read
</div>
</div>
</header>
<div class=content>
<h2 id=introduction-to-octo>Introduction to Octo</h2>
<p><a href=https://github.com/JohnEarnest/Octo>Octo</a> is a high level assembler for an old virtual machine,
<a href=https://en.wikipedia.org/wiki/CHIP-8>CHIP-8</a>,
which was developed in the mid-1970s. Its a VM with some basic audio, graphics, and input.
Game jams with constraints like this are the most fun.</p>
<p>I used the following resources to learn from:</p>
<ul>
<li><a href=https://johnearnest.github.io/Octo/>Octo IDE</a></li>
<li><a href=https://github.com/JohnEarnest/Octo/blob/gh-pages/docs/Manual.md>Octo Assembly Language Manual</a></li>
<li><a href=https://github.com/JohnEarnest/Octo/blob/gh-pages/docs/BeginnersGuide.md>A Beginner&rsquo;s Guide to Programming with Chip8</a></li>
<li><a href=https://github.com/JohnEarnest/Octo/blob/gh-pages/docs/IntermediateGuide.md>An Intermediate Guide to Game Development with Chip8</a></li>
<li><a href=https://github.com/JohnEarnest/Octo/blob/gh-pages/docs/Chip8%20Programming.md>Chip8 Programming Techniques</a></li>
</ul>
<h2 id=octojam-7>Octojam 7</h2>
<p>I intended on attending a game jam called <a href=https://itch.io/jam/octojam-7>Octojam 7</a>
running from 10-01-2020 to 11-01-2020. This was a jam meant to be completed with only Octo.</p>
<p>My idea was a simple two player artillery game. Each player would change the angle and power of a projectile
to try to eliminate the other player. This would require inputs, audio, projectile motion calculation, and collisions.</p>
<p>While it was fun to learn Octo, I ended up not being able to complete anything to submit.
I had too many other projects going on that month and this one got taken off the list.
Hopefully in the future I can attend another one.</p>
<h2 id=projectile-motion-prototype>Projectile Motion Prototype</h2>
<p>The base projectile motion equations needed are:</p>
<p>$x(t) = x_0 + v_{0x}t\cos(\theta)$</p>
<p>$y(t) = y_0 + v_{0y}t\sin(\theta) - \frac{1}{2}gt^2$</p>
<p>So, with given values time $t$, projectile angle $\theta$, initial velocity $v_0$,
and acceleration due to gravity $9.8\frac{\text{m}}{\text{s}^2}$
the values of $x$ and $y$ at time $t$ can be calculated.</p>
<p>Before starting in assembly, I put together a simple projectile motion prototype using pygame.</p>
<p><img src=projectile-motion.png alt=projectile-motion.png></p>
<p><code>game.py</code></p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-py data-lang=py><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#f92672>import</span> pygame<span style=color:#f92672>,</span> math<span style=color:#f92672>,</span> time
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>pygame<span style=color:#f92672>.</span>init()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>(width, height) <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1200</span>, <span style=color:#ae81ff>800</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>screen <span style=color:#f92672>=</span> pygame<span style=color:#f92672>.</span>display<span style=color:#f92672>.</span>set_mode((width, height))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>screen<span style=color:#f92672>.</span>fill((<span style=color:#ae81ff>64</span>, <span style=color:#ae81ff>64</span>, <span style=color:#ae81ff>64</span>))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>clock <span style=color:#f92672>=</span> pygame<span style=color:#f92672>.</span>time<span style=color:#f92672>.</span>Clock()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>pos_scale <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.1</span>      <span style=color:#75715e># scale position down so it fits on small screen</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>height_error <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.01</span>  <span style=color:#75715e># tolerable error for max height of projectile</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>g <span style=color:#f92672>=</span> <span style=color:#ae81ff>9.8</span>              <span style=color:#75715e># gravity</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>theta <span style=color:#f92672>=</span> <span style=color:#ae81ff>45</span>           <span style=color:#75715e># projectile angle</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span style=color:#75715e># initial values</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>v_0 <span style=color:#f92672>=</span> <span style=color:#ae81ff>250</span>                                  <span style=color:#75715e># initial velocity (magnitude)</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>vx_0 <span style=color:#f92672>=</span> v_0 <span style=color:#f92672>*</span> math<span style=color:#f92672>.</span>cos(theta)               <span style=color:#75715e># initial velocity x component</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>vy_0 <span style=color:#f92672>=</span> v_0 <span style=color:#f92672>*</span> math<span style=color:#f92672>.</span>sin(theta)               <span style=color:#75715e># initial velocity y component</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>(x_0, y_0) <span style=color:#f92672>=</span> (width <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.25</span>, height <span style=color:#f92672>*</span> <span style=color:#ae81ff>0.5</span>)  <span style=color:#75715e># initial positions</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span style=color:#75715e># estimations</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>flight_time <span style=color:#f92672>=</span> (<span style=color:#ae81ff>2</span><span style=color:#f92672>*</span>vy_0) <span style=color:#f92672>/</span> g
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>max_height <span style=color:#f92672>=</span> ((vy_0<span style=color:#f92672>**</span><span style=color:#ae81ff>2</span>) <span style=color:#f92672>/</span> (<span style=color:#ae81ff>2</span><span style=color:#f92672>*</span>g)) <span style=color:#f92672>*</span> pos_scale
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>(x_pos, y_pos, t) <span style=color:#f92672>=</span> (<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>  <span style=color:#66d9ef>for</span> event <span style=color:#f92672>in</span> pygame<span style=color:#f92672>.</span>event<span style=color:#f92672>.</span>get():
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>    <span style=color:#66d9ef>if</span> event<span style=color:#f92672>.</span>type <span style=color:#f92672>==</span> pygame<span style=color:#f92672>.</span>QUIT:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>      pygame<span style=color:#f92672>.</span>quit()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span>      exit()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>  <span style=color:#66d9ef>if</span> y_pos <span style=color:#f92672>&lt;=</span> y_0:
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span>    color <span style=color:#f92672>=</span> (<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span>) <span style=color:#66d9ef>if</span> y_pos <span style=color:#f92672>&lt;</span> (max_height <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> height_error)) <span style=color:#66d9ef>else</span> (<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>255</span>,<span style=color:#ae81ff>0</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span>    pygame<span style=color:#f92672>.</span>draw<span style=color:#f92672>.</span>circle(screen, color, (int(x_pos), int(y_pos)), <span style=color:#ae81ff>2</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span>    x_pos <span style=color:#f92672>=</span> x_0 <span style=color:#f92672>+</span> ((vx_0 <span style=color:#f92672>*</span> t <span style=color:#f92672>*</span> math<span style=color:#f92672>.</span>cos(theta)) <span style=color:#f92672>*</span> pos_scale)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span>    y_pos <span style=color:#f92672>=</span> y_0 <span style=color:#f92672>-</span> ((vy_0 <span style=color:#f92672>*</span> t <span style=color:#f92672>*</span> math<span style=color:#f92672>.</span>sin(theta) <span style=color:#f92672>-</span> (<span style=color:#ae81ff>0.5</span> <span style=color:#f92672>*</span> g <span style=color:#f92672>*</span> (t<span style=color:#f92672>**</span><span style=color:#ae81ff>2</span>))) <span style=color:#f92672>*</span> pos_scale)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span>    print(<span style=color:#e6db74>&#39;t = </span><span style=color:#e6db74>{}</span><span style=color:#e6db74>, pos = (</span><span style=color:#e6db74>{:2f}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>{:2f}</span><span style=color:#e6db74>)&#39;</span><span style=color:#f92672>.</span>format(t, x_pos, y_pos))
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span>    pygame<span style=color:#f92672>.</span>display<span style=color:#f92672>.</span>update()
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span>    clock<span style=color:#f92672>.</span>tick(<span style=color:#ae81ff>60</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span>    time<span style=color:#f92672>.</span>sleep(<span style=color:#ae81ff>0.1</span>)
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span>    t <span style=color:#f92672>+=</span> <span style=color:#ae81ff>0.50</span>
</code></pre></div><h2 id=my-entry>My &ldquo;Entry&rdquo;</h2>
<p>This is the only thing I managed to code up. A BCD scoreboard controlled with the arrow keys.</p>
<p><img src=game.png alt=game.png></p>
<p><code>game.8o</code></p>
<pre tabindex=0><code>### Register map ###

# v0
# v1
# v2
# v3
# v4
# v5
# v6
# v7
:alias stk_ptr v8
# v9
# va
# vb
:alias vel_i vc
# vc - vel_x
# vd - vel_y
# ve
:alias flags vf

### Read write data ###

: stack 0 0 0 0 0 0 0 0
: bcd_buffer 0 0 0

# push register v to stack
:macro push v {
    i := stack
    i += stk_ptr
    save v
    stk_ptr += 1
}

# pop register v from stack
:macro pop v {
    stk_ptr += -1
    i := stack
    i += stk_ptr
    load v
}

: wait30
    v0 := 30
    delay := v0
    loop
        v0 := delay
        while v0 != 0
    again
;


# display bcd at pos (x,y)
: dsply_bcd
    i := bcd_buffer
    load v2
	
    # hundreds
    i := hex v0
    v0 := 1
    v3 := 1
    sprite v0 v3 5
  
    # tens
    i := hex v1
    v0 += 5
    sprite v0 v3 5
 
    # ones
    i := hex v2
    v0 += 5
    sprite v0 v3 5
;

# update bcd display with new value
#   IN  v0 - pos x
#   IN  v1 - pos y
#   IN  v2 - number
: write_bcd
    push v2
    dsply_bcd # off
    pop v2
    i := bcd_buffer
    bcd v2
    dsply_bcd # on
;

: init
    clear
    dsply_bcd
;

##############################################
#
#   Main game loop
#
##############################################
: main
    init
    loop
        v0 := 7 # left
        if v0 key begin
            v2 -= 1
            write_bcd
            wait30
        end
		
        v0 := 9 # right
        if v0 key begin
            v2 += 1
            write_bcd
            wait30
        end
		
        v0 := 5 # up
        if v0 key begin
            v2 += 1
            write_bcd
            v0 := 10
            wait30
        end
		
        v0 := 8 # down
        if v0 key begin
            v2 -= 1
            write_bcd
            v0 := 10
            wait30
        end
    again
;
</code></pre>
</div>
</article>
<footer id=footer>
<div class=footer-left>
&copy; 2022
<a href=/>Barrett Otte</a>
</div>
<div class=footer-right>
<nav>
<ul>
<li>
<a class=icon target=_blank rel=noopener href=mailto:barrettotte@gmail.com>
<i class="fas fa-lg fa-envelope"></i>
</a>
</li>
<li>
<a class=icon target=_blank rel=noopener href=https://github.com/barrettotte>
<i class="fab fa-lg fa-github"></i>
</a>
</li>
<li>
<a class=icon target=_blank rel=noopener href=https://www.linkedin.com/in/barrettotte/>
<i class="fab fa-lg fa-linkedin"></i>
</a>
</li>
<li>
<a class=icon target=_blank rel=noopener href="https://news.ycombinator.com/user?id=barrettotte">
<i class="fab fa-lg fa-hacker-news-square"></i>
</a>
</li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/code-copy.js></script>
<script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}}</script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
</html>